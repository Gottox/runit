<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>runit - collection of run scripts</title>
</head>
<body>
<a href="http://smarden.org/pape/">G. Pape</a><br>
<a href="index.html">runit</a><br>
<a href="replaceinit.html">How to replace init</a>
<hr>
<h1>runit - collection of run scripts</h1>
<hr>
<a href="#getty">getty</a><br>
<a href="#sshd">sshd</a><br>
<a href="#klogd">klogd</a><br>
<a href="#expireproctitle">expireproctitle</a><br>
<a href="#dhcpd">dhcpd</a><br>
<a href="#dhclient">dhclient</a><br>
<a href="#gdm">gdm</a><br>
<a href="#statd">statd</a>, <a href="#mountd">mountd</a><br>
<a href="#squid">squid</a>
<hr>
This is a collection of <tt>run</tt> scripts for popular services to have
them monitored by the
<a href="http://cr.yp.to/daemontools.html">daemontools</a> package. If you
have additional run scripts or one of these run scripts works for you on
an operating system not stated here, please
<a href="mailto:pape@smarden.org">let me know</a>. 
<hr>
<h3><a name="getty">A <tt>mingetty</tt> run script</a></h3>
<i>(Debian)</i>
<pre>
  #!/bin/sh
  exec mingetty tty5
</pre>
The <a href="index.html">runit</a> package does not care about utmp records
for getties. You should choose a getty that handles its own utmp and wtmp
records. Debian's <tt>mingetty</tt> does create his own utmp record.
<hr>
<h3><a name="sshd">A <tt>sshd</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec 2>&1
  exec sshd -D -e
</pre>
This service needs a
<a href="http://cr.yp.to/daemontools/faq/create.html#runlog">log service</a>
to be set up.
<p>
The <tt>sshd</tt> program is version <tt>OpenSSH_2.9p2</tt>.
<hr>
<h3><a name="klogd">A <tt>klogd</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec /sbin/klogd -n
</pre>
<hr>
<h3><a name="expireproctitle">An <tt>expireproctitle</tt> run script</a></h3>
<pre>
  #!/bin/sh
  echo -n .
  exec sleep 300
</pre>
<hr>
<h3><a name="dhcpd">A <tt>dhcpd</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec 2>&1
  exec dhcpd-2.2.x -f -d -cf ./config eth0
</pre>
This service needs a
<a href="http://cr.yp.to/daemontools/faq/create.html#runlog">log service</a>
to be set up.
<hr>
<h3><a name="dhclient">A <tt>dhclient</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec dhclient -e -d -cf ./config -lf ./leases -pf ./pid eth1
</pre>
<hr>
<h3><a name="gdm">A <tt>gdm</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec gdm -nodaemon
</pre>
<hr>
<h3><a name="statd">A <tt>statd</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec 2>&1
  NEED_LOCKD=yes
  if test -f /proc/ksyms; then
    # We need to be conservative and run lockd,
    # unless we can prove that it isn't required.
    grep -q lockdctl /proc/ksyms || NEED_LOCKD=no
  fi
  if [ "$NEED_LOCKD" = yes ]; then
    /sbin/rpc.lockd
  fi
  exec rpc.statd -F -d
</pre>
This service needs a
<a href="http://cr.yp.to/daemontools/faq/create.html#runlog">log service</a>
to be set up.
<h3><a name="mountd">A <tt>mountd</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  svwaitup /service/statd
  RPCNFSDCOUNT=8  # Number of servers to be started up by default
  RPCMOUNTDOPTS=-F
  exportfs -r
  rpc.nfsd -- $RPCNFSDCOUNT
  rpcinfo -u localhost nfs 3 >/dev/null 2>&1 ||
    RPCMOUNTDOPTS="$RPCMOUNTDOPTS --no-nfs-version 3"
  exec rpc.mountd $RPCMOUNTDOPTS
</pre>
<hr>
<h3><a name="squid">A <tt>squid</tt> run script</a></h3>
<i>(Debian woody)</i>
<pre>
  #!/bin/sh
  exec squid -f ./config -sN
</pre>
<hr>
<address><a href="mailto:pape@smarden.org">
Gerrit Pape &lt;pape@smarden.org&gt;
</a></address>
<small>$Id$</small>
</body>
</html>
